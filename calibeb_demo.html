<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calibeb Mobile Demo - T√©cnico V3</title>
    
    <!-- CDN Dependencies: Tailwind CSS para estilos utility-first -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome para iconos -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Estilos personalizados: mobile-frame, animaciones, componentes -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- ============================================
         MEN√ö DE NAVEGACI√ìN DE DEMO (Solo Desktop)
         Permite saltar entre pantallas para testing
         ============================================ -->
    <nav class="hidden lg:block fixed top-5 left-5 bg-white p-4 rounded-xl shadow-xl z-50 w-72 font-sans max-h-[90vh] overflow-y-auto" role="navigation" aria-label="Men√∫ de navegaci√≥n de demo">
        <h3 class="font-bold text-slate-800 mb-2 border-b pb-2">Navegaci√≥n V4 - Flujo Completo</h3>
        
        <!-- Grid de botones para navegar entre todas las pantallas -->
        <div class="grid grid-cols-2 gap-2 mb-3">
            <!-- Pantallas principales del flujo -->
            <button onclick="goTo('login')" class="text-xs bg-slate-100 hover:bg-slate-200 p-2 rounded text-left">Login</button>
            <button onclick="goTo('dashboard')" class="text-xs bg-slate-100 hover:bg-slate-200 p-2 rounded text-left">Dashboard</button>
            <button onclick="goTo('detail')" class="text-xs bg-slate-100 hover:bg-slate-200 p-2 rounded text-left">Detalle</button>
            <button onclick="goTo('checkin')" class="text-xs bg-slate-100 hover:bg-slate-200 p-2 rounded text-left">Check-in</button>
            
            <!-- 7 pasos del mantenimiento preventivo (consolidados) -->
            <button onclick="goTo('step1')" class="text-xs bg-green-50 hover:bg-green-100 p-2 rounded text-left text-green-700">P1: Exterior</button>
            <button onclick="goTo('step2')" class="text-xs bg-green-50 hover:bg-green-100 p-2 rounded text-left text-green-700">P2: V√°lvulas</button>
            <button onclick="goTo('step3')" class="text-xs bg-green-50 hover:bg-green-100 p-2 rounded text-left text-green-700">P3: Refrig</button>
            <button onclick="goTo('step4')" class="text-xs bg-green-50 hover:bg-green-100 p-2 rounded text-left text-green-700">P4: Filt+Desag√ºe</button>
            <button onclick="goTo('step5')" class="text-xs bg-green-50 hover:bg-green-100 p-2 rounded text-left text-green-700">P5: Bombas</button>
            <button onclick="goTo('step6')" class="text-xs bg-green-50 hover:bg-green-100 p-2 rounded text-left text-green-700">P6: Componen</button>
            <button onclick="goTo('step7')" class="text-xs bg-green-50 hover:bg-green-100 p-2 rounded text-left text-green-700">P7: Calibrac</button>
            
            <!-- Pantallas finales -->
            <button onclick="goTo('signature')" class="text-xs bg-blue-50 hover:bg-blue-100 p-2 rounded text-left text-blue-700">Firma</button>
            <button onclick="goTo('success')" class="text-xs bg-emerald-50 hover:bg-emerald-100 p-2 rounded text-left text-emerald-700">‚úì √âxito</button>
            
            <!-- Flujo alternativo: Mantenimiento correctivo -->
            <button onclick="goTo('corrective')" class="text-xs bg-orange-100 text-orange-700 hover:bg-orange-200 p-2 rounded text-left font-bold">Correctivo</button>
        </div>
        
        <p class="text-[10px] text-slate-500 bg-slate-100 p-2 rounded">
            <strong>V5:</strong> Flujo optimizado de 7 pasos consolidados seg√∫n requerimientos del cliente (Feb 2026).
        </p>
    </nav>

    <!-- ============================================
         CONTENEDOR PRINCIPAL - Simulador de iPhone
         Contiene todas las pantallas de la SPA
         ============================================ -->
    <div class="mobile-frame" role="main" aria-label="Simulador de aplicaci√≥n m√≥vil">
        <!-- Notch del iPhone (muesca superior) -->
        <div class="notch" aria-hidden="true"></div>
        
        <!-- Barra de estado (hora, se√±al, wifi, bater√≠a) -->
        <div class="absolute top-0 w-full px-6 pt-3 pb-1 flex justify-between items-end z-40 text-xs font-bold text-white mix-blend-difference" role="status" aria-label="Barra de estado del dispositivo">
            <span>9:41</span>
            <div class="flex gap-1.5">
                <i class="fas fa-signal"></i>
                <i class="fas fa-wifi"></i>
                <i class="fas fa-battery-full"></i>
            </div>
        </div>

        <!-- ============================================
             PANTALLA 1: LOGIN
             Primera pantalla que ve el usuario
             Clase "active" determina qu√© pantalla se muestra
             ============================================ -->
        <div id="login" class="screen active bg-dark-sidebar items-center justify-center p-8" role="region" aria-label="Pantalla de inicio de sesi√≥n">
            <div class="w-full max-w-xs -mt-16">
                <!-- Logo de Calibeb -->
                <div class="flex justify-center mb-6">
                    <img src="calibeb_logo-removebg-preview.png" alt="Calibeb Logo" class="h-24 w-auto object-contain">
                </div>

                <!-- T√≠tulo y descripci√≥n -->
                <div class="mb-8 text-center">
                    <h1 class="text-2xl font-bold text-white">App T√©cnico</h1>
                    <p class="text-slate-400 text-sm mt-1">Gesti√≥n de mantenimiento en campo</p>
                </div>

                <!-- Formulario de login -->
                <form class="space-y-4" onsubmit="event.preventDefault(); goTo('dashboard');" role="form" aria-label="Formulario de inicio de sesi√≥n">
                    <!-- Campo Email -->
                    <div>
                        <label for="email-input" class="block text-xs font-bold text-slate-400 uppercase mb-1">Email</label>
                        <div class="flex items-center bg-slate-800 rounded-lg border border-slate-700 overflow-hidden">
                            <span class="pl-3 text-slate-400" aria-hidden="true"><i class="far fa-envelope"></i></span>
                            <input id="email-input" type="email" value="tecnico@calibeb.com" class="w-full bg-transparent text-white px-3 py-3 text-sm focus:outline-none placeholder-slate-500" aria-label="Correo electr√≥nico" autocomplete="email">
                        </div>
                    </div>
                    
                    <!-- Campo Contrase√±a -->
                    <div>
                        <label for="password-input" class="block text-xs font-bold text-slate-400 uppercase mb-1">Contrase√±a</label>
                        <div class="flex items-center bg-slate-800 rounded-lg border border-slate-700 overflow-hidden">
                            <span class="pl-3 text-slate-400" aria-hidden="true"><i class="fas fa-lock"></i></span>
                            <input id="password-input" type="password" value="********" class="w-full bg-transparent text-white px-3 py-3 text-sm focus:outline-none" aria-label="Contrase√±a" autocomplete="current-password">
                        </div>
                    </div>

                    <!-- Bot√≥n submit - Al hacer submit, navega a dashboard -->
                    <button type="submit" class="w-full btn-primary font-bold py-3.5 rounded-lg shadow-lg mt-6 flex items-center justify-center gap-2" aria-label="Iniciar sesi√≥n en la aplicaci√≥n">
                        Iniciar Sesi√≥n <i class="fas fa-arrow-right" aria-hidden="true"></i>
                    </button>
                </form>
            </div>
        </div>

        <!-- ============================================
             PANTALLA 2: DASHBOARD
             Muestra agenda de trabajos y estad√≠sticas
             ============================================ -->
        <div id="dashboard" class="screen bg-slate-50" role="region" aria-label="Panel principal y agenda de trabajo">
            <div class="bg-dark-sidebar pt-12 pb-6 px-6 rounded-b-3xl shadow-lg z-10">
                <div class="flex justify-between items-center mb-4">
                    <div>
                        <p class="text-slate-400 text-xs uppercase font-bold">T√©cnico</p>
                        <h2 class="text-xl font-bold text-white">Miguel L√≥pez</h2>
                    </div>
                    <div class="h-10 w-10 bg-orange-500 rounded-full flex items-center justify-center text-white font-bold border-2 border-slate-800">
                        ML
                    </div>
                </div>
                
                <div class="mt-2">
                    <label for="timeRange" class="sr-only">Seleccionar rango de tiempo</label>
                    <select id="timeRange" onchange="updateDashboardStats(this.value)" class="calibeb-select bg-slate-800 text-white text-sm rounded-xl block w-full p-3 border border-slate-700 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 font-medium transition-all" aria-label="Seleccionar rango de tiempo para visualizar trabajos">
                        <option value="today" selected>üìÖ Trabajos de Hoy</option>
                        <option value="week">üóìÔ∏è Esta Semana</option>
                    </select>
                </div>
            </div>

            <div class="px-5 py-6 flex-1 overflow-y-auto no-scrollbar pb-24">
                
                <button onclick="goTo('corrective')" class="w-full bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 p-4 rounded-xl font-bold shadow-sm flex items-center justify-center gap-3 mb-6 transition group" aria-label="Crear nuevo mantenimiento correctivo">
                    <div class="h-10 w-10 bg-red-100 rounded-full flex items-center justify-center group-hover:bg-red-200 transition">
                        <i class="fas fa-wrench text-red-500"></i>
                    </div>
                    <span>Nuevo Mantenimiento Correctivo</span>
                </button>

                <h3 class="text-slate-800 font-bold mb-4 text-lg">Mi Desempe√±o</h3>
                
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-slate-500 text-xs font-semibold">Completados</span>
                            <span class="bg-green-50 text-green-600 p-1.5 rounded-md text-xs"><i class="fas fa-check-circle"></i></span>
                        </div>
                        <p id="stat-completed" class="text-2xl font-bold text-slate-800 animate-pulse-once">1</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-slate-500 text-xs font-semibold">Pendientes</span>
                            <span class="bg-orange-50 text-orange-600 p-1.5 rounded-md text-xs"><i class="far fa-clock"></i></span>
                        </div>
                        <p id="stat-pending" class="text-2xl font-bold text-slate-800 animate-pulse-once">5</p>
                    </div>
                </div>

                <h3 id="agenda-title" class="text-slate-800 font-bold mb-3 text-lg transition-all">Agenda de Hoy</h3>
                
                <div class="space-y-3">
                    <!-- URGENTE - Marco Rojo -->
                    <div onclick="goTo('detail')" class="bg-white p-4 rounded-xl shadow-sm border-2 border-red-500 border-l-4 border-l-red-600 active:bg-slate-50 transition cursor-pointer relative overflow-hidden">
                        <div class="flex justify-between items-start mb-1">
                            <span class="text-xs font-bold text-slate-400">MNT-2026-125</span>
                            <span class="text-xs font-bold text-red-600 bg-red-50 px-2 py-0.5 rounded">URGENTE</span>
                        </div>
                        <h4 class="text-slate-800 font-bold text-base">Hotel Grand Marquis</h4>
                        <p class="text-sm text-slate-500 mb-2 truncate">Prev. Dispensador Bebidas Calientes</p>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2 text-xs text-slate-500 font-medium">
                                <i class="far fa-clock text-red-500"></i> 07:00 AM - 08:30 AM
                            </div>
                            <span class="text-[10px] font-bold text-red-600 bg-red-50 px-2 py-0.5 rounded">Correctivo</span>
                        </div>
                    </div>

                    <!-- RETRASADO -->
                    <div onclick="goTo('detail')" class="bg-white p-4 rounded-xl shadow-sm border border-amber-300 border-l-4 border-l-amber-500 active:bg-slate-50 transition cursor-pointer relative overflow-hidden">
                        <div class="flex justify-between items-start mb-1">
                            <span class="text-xs font-bold text-slate-400">MNT-2026-118</span>
                            <span class="text-xs font-bold text-amber-700 bg-amber-50 px-2 py-0.5 rounded">RETRASADO</span>
                        </div>
                        <h4 class="text-slate-800 font-bold text-base">Centro Comercial Altaria</h4>
                        <p class="text-sm text-slate-500 mb-2 truncate">Prev. M√°quina Expendedora Snacks</p>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2 text-xs text-slate-500 font-medium">
                                <i class="fas fa-exclamation-triangle text-amber-600"></i> Debi√≥ terminar ayer
                            </div>
                            <span class="text-[10px] font-bold text-green-600 bg-green-50 px-2 py-0.5 rounded">Preventivo</span>
                        </div>
                    </div>

                    <!-- AGRUPACI√ìN APTIV PLANTA 5 -->
                    <div class="bg-slate-50 border border-slate-200 rounded-xl overflow-hidden">
                        <!-- Header del grupo -->
                        <div class="bg-orange-50 border-b border-orange-100 px-4 py-2 flex items-center gap-2">
                            <i class="fas fa-building text-orange-600 text-sm"></i>
                            <span class="text-xs font-bold text-orange-700">Aptiv Planta 5</span>
                            <span class="ml-auto text-[10px] bg-white text-orange-600 px-2 py-0.5 rounded font-semibold">2 Equipos</span>
                        </div>
                        
                        <!-- Mantenimientos agrupados -->
                        <div class="divide-y divide-slate-200">
                            <!-- Mantenimiento 1 - MNT-2026-123 -->
                            <div onclick="goTo('detail')" class="bg-white p-4 hover:bg-slate-50 active:bg-slate-100 transition cursor-pointer border-l-4 border-l-orange-500">
                                <div class="flex justify-between items-start mb-1">
                                    <span class="text-xs font-bold text-slate-400">MNT-2026-123</span>
                                    <span class="text-xs font-bold text-orange-600 bg-orange-50 px-2 py-0.5 rounded">PENDIENTE</span>
                                </div>
                                <h4 class="text-slate-800 font-semibold text-sm">Dispensador Crathco #1</h4>
                                <p class="text-xs text-slate-500 mb-2">Prev. Limpieza y calibraci√≥n</p>
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center gap-2 text-xs text-slate-500 font-medium">
                                        <i class="far fa-clock text-orange-500"></i> 09:00 AM - 10:30 AM
                                    </div>
                                    <span class="text-[10px] font-bold text-red-600 bg-red-50 px-2 py-0.5 rounded">Correctivo</span>
                                </div>
                            </div>

                            <!-- Mantenimiento 2 - MNT-2026-124 -->
                            <div onclick="goTo('detail')" class="bg-white p-4 hover:bg-slate-50 active:bg-slate-100 transition cursor-pointer border-l-4 border-l-orange-500">
                                <div class="flex justify-between items-start mb-1">
                                    <span class="text-xs font-bold text-slate-400">MNT-2026-124</span>
                                    <span class="text-xs font-bold text-orange-600 bg-orange-50 px-2 py-0.5 rounded">PENDIENTE</span>
                                </div>
                                <h4 class="text-slate-800 font-semibold text-sm">Dispensador Crathco #2</h4>
                                <p class="text-xs text-slate-500 mb-2">Prev. Cambio de filtros</p>
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center gap-2 text-xs text-slate-500 font-medium">
                                        <i class="far fa-clock text-orange-500"></i> 10:30 AM - 12:00 PM
                                    </div>
                                    <span class="text-[10px] font-bold text-green-600 bg-green-50 px-2 py-0.5 rounded">Preventivo</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- COMPLETADO - Con tag Preventivo -->
                    <div class="bg-slate-100 p-4 rounded-xl shadow-sm border border-slate-200 border-l-4 border-l-green-500 opacity-75">
                        <div class="flex justify-between items-start mb-1">
                            <span class="text-xs font-bold text-slate-400">MNT-2026-120</span>
                            <span class="text-xs font-bold text-green-700 bg-green-100 px-2 py-0.5 rounded">COMPLETADO</span>
                        </div>
                        <h4 class="text-slate-700 font-bold text-base line-through">Comedor Industrial Baj√≠o</h4>
                        <p class="text-sm text-slate-500 mb-2 truncate">Mantenimiento Dispensador Crathco</p>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2 text-xs text-slate-500">
                                <i class="fas fa-check text-green-600"></i> Finalizado 08:15 AM
                            </div>
                            <span class="text-[10px] font-bold text-green-600 bg-green-50 px-2 py-0.5 rounded">Preventivo</span>
                        </div>
                    </div>
                </div>
            </div>

            <nav class="absolute bottom-0 w-full bg-dark-sidebar border-t border-slate-800 pb-6 pt-3 px-6 flex justify-between items-center text-slate-400" role="navigation" aria-label="Navegaci√≥n principal de la aplicaci√≥n">
                <button onclick="goTo('dashboard')" class="flex flex-col items-center gap-1 text-calibeb transition" aria-label="Ir a agenda de trabajos" aria-current="page">
                    <i class="fas fa-calendar-day text-xl" aria-hidden="true"></i>
                    <span class="text-[10px] font-medium">Agenda</span>
                </button>
                <button class="flex flex-col items-center gap-1 hover:text-white transition" aria-label="Ver ruta de trabajo">
                    <i class="fas fa-map-marker-alt text-xl" aria-hidden="true"></i>
                    <span class="text-[10px] font-medium">Ruta</span>
                </button>
                <button class="flex flex-col items-center justify-center -mt-8 bg-orange-500 h-14 w-14 rounded-full shadow-lg border-4 border-slate-900 text-white hover:bg-orange-600 transition transform active:scale-95" aria-label="Escanear c√≥digo QR">
                    <i class="fas fa-qrcode text-xl" aria-hidden="true"></i>
                </button>
                <button class="flex flex-col items-center gap-1 hover:text-white transition" aria-label="Ver avisos y notificaciones">
                    <i class="fas fa-bell text-xl relative" aria-hidden="true">
                        <span class="absolute -top-1 -right-1 h-2.5 w-2.5 bg-red-500 rounded-full border-2 border-slate-900" role="status" aria-label="Tiene notificaciones nuevas"></span>
                    </i>
                    <span class="text-[10px] font-medium">Avisos</span>
                </button>
                <button class="flex flex-col items-center gap-1 hover:text-white transition" aria-label="Ver perfil y configuraci√≥n">
                    <i class="fas fa-user-cog text-xl" aria-hidden="true"></i>
                    <span class="text-[10px] font-medium">Perfil</span>
                </button>
            </nav>
        </div>

        <div id="detail" class="screen bg-slate-50">
            <div class="bg-white pt-12 pb-4 px-4 shadow-sm flex items-center gap-4 z-10 border-b border-slate-100">
                <button onclick="goTo('dashboard')" class="h-8 w-8 rounded-full bg-slate-100 hover:bg-slate-200 transition flex items-center justify-center text-slate-600">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2 class="font-bold text-slate-800 text-lg">Detalle de Orden</h2>
            </div>

            <div class="p-5 overflow-y-auto no-scrollbar pb-24 flex-1">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h1 class="text-2xl font-bold text-slate-900">MNT-123</h1>
                        <p class="text-sm text-slate-500 flex items-center gap-1"><i class="fas fa-building text-slate-400/80 text-xs"></i> Aptiv Planta 5 ‚Ä¢ Nave B</p>
                    </div>
                    <div class="bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-xs font-bold border border-orange-200 animate-pulse">
                        PENDIENTE
                    </div>
                </div>

                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-6">
                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-3">Equipo Asignado</h3>
                    <div class="flex gap-4 items-center">
                        <div class="h-14 w-14 bg-blue-50 rounded-xl flex items-center justify-center text-blue-500 text-2xl border border-blue-100">
                            <i class="fas fa-blender"></i>
                        </div>
                        <div>
                            <p class="font-bold text-slate-800 text-lg">Dispensador Crathco</p>
                            <p class="text-xs text-slate-500 font-mono bg-slate-100 inline-block px-2 py-1 rounded mt-1">SN: DISP-2024-45</p>
                        </div>
                    </div>
                </div>

                <button onclick="goTo('checkin')" class="w-full btn-primary py-4 rounded-xl font-bold shadow-lg flex items-center justify-center gap-2 mb-8 transition transform active:scale-[0.99]">
                    <i class="fas fa-map-marker-alt"></i> Validar Ubicaci√≥n (Check-in)
                </button>

                <h3 class="text-sm font-bold text-slate-800 mb-3">Pasos a realizar (7)</h3>
                <div class="space-y-3 opacity-60 pointer-events-none select-none">
                    <div class="bg-white p-4 rounded-xl border border-slate-200 flex items-center gap-4 shadow-sm">
                        <div class="w-8 h-8 rounded-full border-2 border-slate-300 flex items-center justify-center text-slate-300 font-bold text-sm">1</div>
                        <span class="text-sm font-medium text-slate-600">Exterior de M√°quina</span>
                    </div>
                    <div class="bg-white p-4 rounded-xl border border-slate-200 flex items-center gap-4 shadow-sm">
                        <div class="w-8 h-8 rounded-full border-2 border-slate-300 flex items-center justify-center text-slate-300 font-bold text-sm">2</div>
                        <span class="text-sm font-medium text-slate-600">V√°lvulas</span>
                    </div>
                    <div class="bg-white p-4 rounded-xl border border-slate-200 flex items-center gap-4 shadow-sm">
                        <div class="w-8 h-8 rounded-full border-2 border-slate-300 flex items-center justify-center text-slate-300 font-bold text-sm">3</div>
                        <span class="text-sm font-medium text-slate-600">Unidad de Refrigeraci√≥n</span>
                    </div>
                    <div class="bg-white p-4 rounded-xl border border-slate-200 flex items-center gap-4 shadow-sm">
                        <div class="w-8 h-8 rounded-full border-2 border-slate-300 flex items-center justify-center text-slate-300 font-bold text-sm">4</div>
                        <span class="text-sm font-medium text-slate-600">Filtraci√≥n y Desag√ºe</span>
                    </div>
                    <div class="bg-white p-4 rounded-xl border border-slate-200 flex items-center gap-4 shadow-sm">
                        <div class="w-8 h-8 rounded-full border-2 border-slate-300 flex items-center justify-center text-slate-300 font-bold text-sm">5</div>
                        <span class="text-sm font-medium text-slate-600">Bombas</span>
                    </div>
                    <div class="bg-white p-4 rounded-xl border border-slate-200 flex items-center gap-4 shadow-sm">
                        <div class="w-8 h-8 rounded-full border-2 border-slate-300 flex items-center justify-center text-slate-300 font-bold text-sm">6</div>
                        <span class="text-sm font-medium text-slate-600">Componentes Adicionales</span>
                    </div>
                    <div class="bg-white p-4 rounded-xl border border-slate-200 flex items-center gap-4 shadow-sm">
                        <div class="w-8 h-8 rounded-full border-2 border-slate-300 flex items-center justify-center text-slate-300 font-bold text-sm">7</div>
                        <span class="text-sm font-medium text-slate-600">Calibraci√≥n de V√°lvulas</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="checkin" class="screen bg-white relative">
            <div class="absolute inset-0 bg-slate-200 opacity-50" style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/World_map_blank_without_borders.svg/2000px-World_map_blank_without_borders.svg.png'); background-size: cover; filter: grayscale(100%);"></div>
            
            <div class="absolute top-4 left-4 z-20">
                <button onclick="goTo('detail')" class="h-10 w-10 rounded-full bg-white hover:bg-slate-50 transition flex items-center justify-center text-slate-600 shadow-md border border-slate-200" aria-label="Volver a detalle de orden">
                    <i class="fas fa-arrow-left"></i>
                </button>
            </div>
            
            <div class="absolute inset-0 flex flex-col items-center justify-center p-6 bg-white/90 backdrop-blur-sm">
                
                <div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mb-6 relative">
                    <div class="absolute inset-0 rounded-full border-4 border-green-500 opacity-25 animate-ping"></div>
                    <i class="fas fa-check text-green-600 text-4xl"></i>
                </div>

                <h2 class="text-2xl font-bold text-slate-800 mb-2">Ubicaci√≥n Validada</h2>
                <p class="text-slate-500 text-center mb-8 text-sm max-w-[250px]">Est√°s a 150m del punto de servicio. Puedes comenzar.</p>

                <div class="w-full bg-white border border-slate-200 rounded-xl p-5 mb-8 shadow-sm">
                    <div class="flex justify-between py-2 border-b border-slate-100">
                        <span class="text-slate-500 text-xs flex items-center gap-2"><i class="fas fa-satellite-dish text-slate-400"></i> Precisi√≥n GPS</span>
                        <span class="text-green-600 text-xs font-bold bg-green-50 px-2 py-1 rounded-full">Alta (5m)</span>
                    </div>
                    <div class="flex justify-between py-2 pt-3">
                         <span class="text-slate-500 text-xs flex items-center gap-2"><i class="far fa-clock text-slate-400"></i> Hora Check-in</span>
                        <span class="text-slate-800 text-xs font-bold">09:15 AM</span>
                    </div>
                </div>

                <button onclick="goTo('qr-scan')" class="w-full btn-primary py-4 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99]">
                    Continuar con Escaneo QR
                </button>
            </div>
        </div>

        <!-- PANTALLA: ESCANEO DE QR -->
        <div id="qr-scan" class="screen bg-slate-50">
            <div class="bg-white pt-12 pb-4 px-6 shadow-sm border-b border-slate-100 z-10">
                <div class="flex items-center gap-4 mb-2">
                    <button onclick="goTo('checkin')" class="h-8 w-8 rounded-full bg-slate-100 hover:bg-slate-200 transition flex items-center justify-center text-slate-600">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="text-xl font-bold text-slate-800">Escaneo de QR</h2>
                </div>
            </div>

            <div class="p-6 overflow-y-auto flex-1 no-scrollbar pb-24">
                <div class="bg-white border-2 border-dashed border-slate-300 rounded-xl p-8 mb-6 flex flex-col items-center justify-center min-h-[300px]">
                    <div class="w-32 h-32 bg-slate-100 rounded-xl flex items-center justify-center mb-4">
                        <i class="fas fa-qrcode text-slate-400 text-6xl"></i>
                    </div>
                    <p class="text-slate-600 text-center text-sm mb-4">Escanea el c√≥digo QR de la m√°quina</p>
                    <button class="btn-primary py-3 px-6 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99] flex items-center gap-2">
                        <i class="fas fa-camera"></i> Abrir C√°mara
                    </button>
                </div>

                <div class="bg-slate-50 border border-slate-200 rounded-xl p-4 mb-4">
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" id="qr-unavailable-checkbox" onchange="toggleQRExplanation(this.checked)" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">QR no disponible</span>
                    </label>
                </div>

                <div id="qr-explanation" style="display: none;">
                    <label class="block text-sm font-bold text-slate-700 mb-2">Explicaci√≥n <span class="text-red-500">*</span></label>
                    <textarea class="w-full bg-white border border-slate-200 rounded-xl p-4 text-sm text-slate-700 h-24 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 resize-none shadow-sm" placeholder="Ej. QR da√±ado/roto"></textarea>
                </div>
            </div>

            <div class="absolute bottom-0 w-full bg-white p-4 border-t border-slate-100 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-10">
                <button onclick="validateQR()" class="w-full btn-primary py-4 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99]">
                    Validar y Continuar
                </button>
            </div>
        </div>

        <!-- PANTALLA: QR VALIDADO -->
        <div id="qr-validated" class="screen bg-white relative">
            <div class="absolute inset-0 flex flex-col items-center justify-center p-6 bg-gradient-to-b from-green-50 to-white">
                
                <div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mb-6 relative">
                    <div class="absolute inset-0 rounded-full border-4 border-green-500 opacity-25 animate-ping"></div>
                    <i class="fas fa-qrcode text-green-600 text-4xl"></i>
                </div>

                <h2 class="text-2xl font-bold text-slate-800 mb-2">QR Validado</h2>
                <p class="text-slate-500 text-center mb-8 text-sm max-w-[280px]">El c√≥digo QR ha sido verificado correctamente. M√°quina confirmada.</p>

                <div class="w-full bg-white border border-slate-200 rounded-xl p-5 mb-8 shadow-sm">
                    <div class="flex justify-between py-2 border-b border-slate-100">
                        <span class="text-slate-500 text-xs flex items-center gap-2"><i class="fas fa-barcode text-slate-400"></i> C√≥digo QR</span>
                        <span class="text-slate-800 text-xs font-bold font-mono">DISP-2024-45</span>
                    </div>
                    <div class="flex justify-between py-2 pt-3">
                         <span class="text-slate-500 text-xs flex items-center gap-2"><i class="far fa-clock text-slate-400"></i> Hora Validaci√≥n</span>
                        <span class="text-slate-800 text-xs font-bold">09:16 AM</span>
                    </div>
                </div>

                <button onclick="goTo('step1')" class="w-full btn-primary py-4 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99]">
                    Comenzar Mantenimiento
                </button>
            </div>
        </div>

        <!-- PANTALLA: CONTINUAR SIN QR -->
        <div id="qr-unavailable" class="screen bg-white relative">
            <div class="absolute inset-0 flex flex-col items-center justify-center p-6 bg-gradient-to-b from-orange-50 to-white">
                
                <div class="w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center mb-6 relative">
                    <i class="fas fa-exclamation-triangle text-orange-600 text-4xl"></i>
                </div>

                <h2 class="text-2xl font-bold text-slate-800 mb-2">Continuar con Mantenimiento</h2>
                <p class="text-slate-500 text-center mb-8 text-sm max-w-[280px]">El QR no est√° disponible. Se ha registrado tu explicaci√≥n y puedes proceder.</p>

                <div class="w-full bg-white border border-orange-200 rounded-xl p-5 mb-8 shadow-sm">
                    <div class="flex items-start gap-3">
                        <i class="fas fa-info-circle text-orange-500 text-lg mt-0.5"></i>
                        <div>
                            <p class="text-xs font-bold text-slate-700 mb-1">Nota Importante</p>
                            <p class="text-xs text-slate-600">Esta incidencia quedar√° registrada en el reporte final del mantenimiento.</p>
                        </div>
                    </div>
                </div>

                <button onclick="goTo('step1')" class="w-full btn-primary py-4 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99]">
                    Continuar con Mantenimiento
                </button>
            </div>
        </div>

        <div id="step1" class="screen bg-slate-50">
            <div class="bg-white pt-12 pb-4 px-6 shadow-sm border-b border-slate-100 z-10">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-bold text-orange-600 uppercase tracking-wider bg-orange-50 px-2 py-1 rounded">Paso 1 de 7</span>
                    <span class="text-xs font-bold text-slate-400">14% completado</span>
                </div>
                <h2 class="text-xl font-bold text-slate-800 mt-3">Exterior de M√°quina</h2>
                <div class="w-full h-2 bg-slate-100 rounded-full mt-4 overflow-hidden">
                    <div class="h-full bg-orange-500 w-[14%] rounded-full relative"></div>
                </div>
            </div>

            <div class="p-6 overflow-y-auto flex-1 no-scrollbar pb-24">
                <div class="mb-8 space-y-3">
                     <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Lista de Verificaci√≥n</h3>
                    
                    <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Limpiar parte superior</span>
                    </label>
                    <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Limpiar costados</span>
                    </label>
                    <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Limpiar parte trasera</span>
                    </label>
                     <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Limpieza base y patas</span>
                    </label>
                    <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Revisi√≥n clavija y tomacorriente</span>
                    </label>

                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm mt-4">
                        <p class="text-sm font-medium text-slate-700 mb-3">Tapa de v√°lvulas:</p>
                        <div class="flex radio-group">
                            <input type="radio" id="tapa-bien" name="tapa" checked>
                            <label for="tapa-bien" class="flex-1 text-center text-sm">Bien</label>
                            <input type="radio" id="tapa-mal" name="tapa">
                            <label for="tapa-mal" class="flex-1 text-center text-sm">Mal</label>
                        </div>
                    </div>
                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm">
                        <p class="text-sm font-medium text-slate-700 mb-3">Etiquetas de v√°lvulas:</p>
                        <div class="flex radio-group">
                            <input type="radio" id="etiq-bien" name="etiquetas" checked>
                            <label for="etiq-bien" class="flex-1 text-center text-sm">Bien</label>
                            <input type="radio" id="etiq-mal" name="etiquetas">
                            <label for="etiq-mal" class="flex-1 text-center text-sm">Mal</label>
                        </div>
                    </div>
                </div>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Evidencia Fotogr√°fica</h3>
                <button class="w-full bg-slate-100 hover:bg-slate-200 border-2 border-dashed border-slate-300 hover:border-slate-400 rounded-xl p-4 text-slate-400 hover:text-slate-600 font-bold text-sm flex items-center justify-center gap-2 transition group mb-8">
                    <i class="fas fa-camera text-lg group-hover:scale-110 transition"></i>
                    <span>Agregar Foto</span>
                    <span class="text-xs font-normal opacity-60">(m√°x. 5)</span>
                </button>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Notas del T√©cnico</h3>
                <textarea class="w-full bg-white border border-slate-200 rounded-xl p-4 text-sm text-slate-700 h-24 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 resize-none shadow-sm" placeholder="Observaciones sobre este paso..."></textarea>
            </div>

            <div class="absolute bottom-0 w-full bg-white p-4 border-t border-slate-100 flex gap-3 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-10">
                <button onclick="goTo('checkin')" class="py-3.5 px-4 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition flex items-center justify-center" aria-label="Volver al paso anterior">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="flex-1 py-3.5 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition">Guardar</button>
                <button onclick="goTo('step2')" class="flex-[2] btn-primary py-3.5 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99] flex items-center justify-center gap-2">
                    Siguiente Paso <i class="fas fa-chevron-right text-xs"></i>
                </button>
            </div>
        </div>

        <div id="step2" class="screen bg-slate-50">
            <div class="bg-white pt-12 pb-4 px-6 shadow-sm border-b border-slate-100 z-10">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-bold text-orange-600 uppercase tracking-wider bg-orange-50 px-2 py-1 rounded">Paso 2 de 7</span>
                    <span class="text-xs font-bold text-slate-400">29% completado</span>
                </div>
                <h2 class="text-xl font-bold text-slate-800 mt-3">V√°lvulas</h2>
                <div class="w-full h-2 bg-slate-100 rounded-full mt-4 overflow-hidden">
                    <div class="h-full bg-orange-500 w-[29%] rounded-full relative"></div>
                </div>
            </div>

            <div class="p-6 overflow-y-auto flex-1 no-scrollbar pb-24">
                <div class="mb-8 space-y-3">
                     <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Lista de Verificaci√≥n</h3>
                    
                    <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Limpieza boquillas y difusor</span>
                    </label>
                    <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Limpieza ranura interna</span>
                    </label>
                    <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Revisi√≥n de micros</span>
                    </label>
                     <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Estado de bobinas</span>
                    </label>
                    <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Revisi√≥n de palancas</span>
                    </label>
                    <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Lavado de cuerpo de v√°lvulas</span>
                    </label>
                </div>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Evidencia Fotogr√°fica</h3>
                <button class="w-full bg-slate-100 hover:bg-slate-200 border-2 border-dashed border-slate-300 hover:border-slate-400 rounded-xl p-4 text-slate-400 hover:text-slate-600 font-bold text-sm flex items-center justify-center gap-2 transition group mb-8">
                    <i class="fas fa-camera text-lg group-hover:scale-110 transition"></i>
                    <span>Agregar Foto</span>
                    <span class="text-xs font-normal opacity-60">(m√°x. 5)</span>
                </button>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Notas del T√©cnico</h3>
                <textarea class="w-full bg-white border border-slate-200 rounded-xl p-4 text-sm text-slate-700 h-24 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 resize-none shadow-sm" placeholder="Observaciones sobre este paso..."></textarea>
            </div>

            <div class="absolute bottom-0 w-full bg-white p-4 border-t border-slate-100 flex gap-3 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-10">
                <button onclick="goTo('step1')" class="py-3.5 px-4 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition flex items-center justify-center" aria-label="Volver al paso anterior">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="flex-1 py-3.5 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition">Guardar</button>
                <button onclick="goTo('step3')" class="flex-[2] btn-primary py-3.5 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99] flex items-center justify-center gap-2">
                    Siguiente Paso <i class="fas fa-chevron-right text-xs"></i>
                </button>
            </div>
        </div>

        <!-- PASO 3: UNIDAD DE REFRIGERACI√ìN (CONSOLIDADO) -->
        <div id="step3" class="screen bg-slate-50">
            <div class="bg-white pt-12 pb-4 px-6 shadow-sm border-b border-slate-100 z-10">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-bold text-orange-600 uppercase tracking-wider bg-orange-50 px-2 py-1 rounded">Paso 3 de 7</span>
                    <span class="text-xs font-bold text-slate-400">43% completado</span>
                </div>
                <h2 class="text-xl font-bold text-slate-800 mt-3">Unidad de Refrigeraci√≥n</h2>
                <div class="w-full h-2 bg-slate-100 rounded-full mt-4 overflow-hidden">
                    <div class="h-full bg-orange-500 w-[43%] rounded-full relative"></div>
                </div>
            </div>

            <div class="p-6 overflow-y-auto flex-1 no-scrollbar pb-24">
                <!-- CHECKBOX "NO APLICA" -->
                <div class="bg-orange-50 border-2 border-orange-200 rounded-xl p-4 mb-6">
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" id="step3-no-aplica" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-orange-300 focus:ring-orange-500 cursor-pointer" onchange="document.getElementById('step3-content').style.opacity = this.checked ? '0.4' : '1'; document.getElementById('step3-content').style.pointerEvents = this.checked ? 'none' : 'auto';">
                        <div>
                            <span class="text-sm font-bold text-orange-800 block">No Aplica</span>
                            <span class="text-xs text-orange-600">Marcar si este paso no es necesario</span>
                        </div>
                    </label>
                </div>

                <div id="step3-content" class="transition-opacity duration-300">
                    <!-- TEMPERATURA -->
                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Temperatura</h3>
                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm mb-6">
                        <p class="text-sm font-medium text-slate-700 mb-3">Estado de temperatura:</p>
                        <div class="flex radio-group">
                            <input type="radio" id="temp-bien" name="temperatura" checked>
                            <label for="temp-bien" class="flex-1 text-center text-sm">Bien</label>
                            <input type="radio" id="temp-mal" name="temperatura">
                            <label for="temp-mal" class="flex-1 text-center text-sm">Mal</label>
                        </div>
                    </div>

                    <!-- LIMPIEZA CONDENSADOR -->
                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Limpieza de Condensador</h3>
                    <div class="mb-6 space-y-3">
                        <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                            <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                            <span class="text-sm font-medium text-slate-700 leading-tight">Limpieza de condensador</span>
                        </label>
                    </div>

                    <!-- REVISI√ìN COMPONENTES COMPRESOR -->
                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Componentes del Compresor</h3>
                    <div class="mb-6 space-y-3">
                        <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                            <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                            <span class="text-sm font-medium text-slate-700 leading-tight">Revisi√≥n de componentes de compresor</span>
                        </label>
                    </div>

                    <!-- MOTOR AGITADOR -->
                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Motor Agitador</h3>
                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm mb-6">
                        <p class="text-sm font-medium text-slate-700 mb-3">Condici√≥n:</p>
                        <div class="flex radio-group">
                            <input type="radio" id="agitador-bien" name="motor-agitador" checked>
                            <label for="agitador-bien" class="flex-1 text-center text-sm">Bien</label>
                            <input type="radio" id="agitador-mal" name="motor-agitador">
                            <label for="agitador-mal" class="flex-1 text-center text-sm">Mal</label>
                        </div>
                    </div>

                    <!-- MOTOR CONDENSADOR -->
                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Motor Condensador</h3>
                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm mb-6">
                        <p class="text-sm font-medium text-slate-700 mb-3">Condici√≥n:</p>
                        <div class="flex radio-group">
                            <input type="radio" id="condensador-bien" name="motor-condensador" checked>
                            <label for="condensador-bien" class="flex-1 text-center text-sm">Bien</label>
                            <input type="radio" id="condensador-mal" name="motor-condensador">
                            <label for="condensador-mal" class="flex-1 text-center text-sm">Mal</label>
                        </div>
                    </div>

                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Evidencia Fotogr√°fica</h3>
                    <button class="w-full bg-slate-100 hover:bg-slate-200 border-2 border-dashed border-slate-300 hover:border-slate-400 rounded-xl p-4 text-slate-400 hover:text-slate-600 font-bold text-sm flex items-center justify-center gap-2 transition group mb-8">
                        <i class="fas fa-camera text-lg group-hover:scale-110 transition"></i>
                        <span>Agregar Foto</span>
                        <span class="text-xs font-normal opacity-60">(m√°x. 5)</span>
                    </button>

                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Notas del T√©cnico</h3>
                    <textarea class="w-full bg-white border border-slate-200 rounded-xl p-4 text-sm text-slate-700 h-24 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 resize-none shadow-sm" placeholder="Observaciones sobre este paso..."></textarea>
                </div>
            </div>

            <div class="absolute bottom-0 w-full bg-white p-4 border-t border-slate-100 flex gap-3 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-10">
                <button onclick="goTo('step2')" class="py-3.5 px-4 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition flex items-center justify-center" aria-label="Volver al paso anterior">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="flex-1 py-3.5 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition">Guardar</button>
                <button onclick="goTo('step4')" class="flex-[2] btn-primary py-3.5 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99] flex items-center justify-center gap-2">
                    Siguiente Paso <i class="fas fa-chevron-right text-xs"></i>
                </button>
            </div>
        </div>

        <!-- PASO 4: FILTRACI√ìN Y DESAG√úE (CONSOLIDADO) -->
        <div id="step4" class="screen bg-slate-50">
            <div class="bg-white pt-12 pb-4 px-6 shadow-sm border-b border-slate-100 z-10">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-bold text-orange-600 uppercase tracking-wider bg-orange-50 px-2 py-1 rounded">Paso 4 de 7</span>
                    <span class="text-xs font-bold text-slate-400">57% completado</span>
                </div>
                <h2 class="text-xl font-bold text-slate-800 mt-3">Filtraci√≥n y Desag√ºe</h2>
                <div class="w-full h-2 bg-slate-100 rounded-full mt-4 overflow-hidden">
                    <div class="h-full bg-orange-500 w-[57%] rounded-full relative"></div>
                </div>
            </div>

            <div class="p-6 overflow-y-auto flex-1 no-scrollbar pb-24">
                <!-- FILTRACI√ìN -->
                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Filtraci√≥n</h3>
                <div class="mb-6 space-y-3">
                    <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Limpiar Portafiltros</span>
                    </label>

                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm">
                        <p class="text-sm font-medium text-slate-700 mb-3">Condiciones del filtro:</p>
                        <div class="flex radio-group">
                            <input type="radio" id="filtro-buena" name="filtro" checked>
                            <label for="filtro-buena" class="flex-1 text-center text-sm">Buena</label>
                            <input type="radio" id="filtro-mala" name="filtro">
                            <label for="filtro-mala" class="flex-1 text-center text-sm">Mala</label>
                        </div>
                    </div>
                </div>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Fecha de Vencimiento Filtro</h3>
                <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm mb-6">
                    <input type="date" class="w-full border border-slate-300 rounded-lg px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500">
                </div>

                <!-- DESAG√úE -->
                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Desag√ºe</h3>
                <div class="mb-6 space-y-3">
                    <label class="flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-xl shadow-sm cursor-pointer transition hover:border-orange-300">
                        <input type="checkbox" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-slate-300 focus:ring-orange-500 cursor-pointer">
                        <span class="text-sm font-medium text-slate-700 leading-tight">Revisi√≥n y limpieza de charola de desag√ºe</span>
                    </label>

                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm">
                        <p class="text-sm font-medium text-slate-700 mb-3">Estado de mangueras de desag√ºe:</p>
                        <div class="flex radio-group">
                            <input type="radio" id="mangueras-bien" name="mangueras" checked>
                            <label for="mangueras-bien" class="flex-1 text-center text-sm">Bien</label>
                            <input type="radio" id="mangueras-mal" name="mangueras">
                            <label for="mangueras-mal" class="flex-1 text-center text-sm">Mal</label>
                        </div>
                    </div>
                </div>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Evidencia Fotogr√°fica</h3>
                <button class="w-full bg-slate-100 hover:bg-slate-200 border-2 border-dashed border-slate-300 hover:border-slate-400 rounded-xl p-4 text-slate-400 hover:text-slate-600 font-bold text-sm flex items-center justify-center gap-2 transition group mb-8">
                    <i class="fas fa-camera text-lg group-hover:scale-110 transition"></i>
                    <span>Agregar Foto</span>
                    <span class="text-xs font-normal opacity-60">(m√°x. 5)</span>
                </button>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Notas del T√©cnico</h3>
                <textarea class="w-full bg-white border border-slate-200 rounded-xl p-4 text-sm text-slate-700 h-24 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 resize-none shadow-sm" placeholder="Observaciones sobre este paso..."></textarea>
            </div>

            <div class="absolute bottom-0 w-full bg-white p-4 border-t border-slate-100 flex gap-3 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-10">
                <button onclick="goTo('step3')" class="py-3.5 px-4 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition flex items-center justify-center" aria-label="Volver al paso anterior">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="flex-1 py-3.5 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition">Guardar</button>
                <button onclick="goTo('step5')" class="flex-[2] btn-primary py-3.5 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99] flex items-center justify-center gap-2">
                    Siguiente Paso <i class="fas fa-chevron-right text-xs"></i>
                </button>
            </div>
        </div>

        <!-- PASO 5: BOMBAS -->
        <div id="step5" class="screen bg-slate-50">
            <div class="bg-white pt-12 pb-4 px-6 shadow-sm border-b border-slate-100 z-10">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-bold text-orange-600 uppercase tracking-wider bg-orange-50 px-2 py-1 rounded">Paso 5 de 7</span>
                    <span class="text-xs font-bold text-slate-400">71% completado</span>
                </div>
                <h2 class="text-xl font-bold text-slate-800 mt-3">Bombas</h2>
                <div class="w-full h-2 bg-slate-100 rounded-full mt-4 overflow-hidden">
                    <div class="h-full bg-orange-500 w-[71%] rounded-full relative"></div>
                </div>
            </div>

            <div class="p-6 overflow-y-auto flex-1 no-scrollbar pb-24">
                <div class="mb-8 space-y-4">
                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm">
                        <p class="text-sm font-medium text-slate-700 mb-3">Funciona:</p>
                        <div class="flex radio-group">
                            <input type="radio" id="bombas-bien" name="bombas-func" checked>
                            <label for="bombas-bien" class="flex-1 text-center text-sm">Bien</label>
                            <input type="radio" id="bombas-mal" name="bombas-func">
                            <label for="bombas-mal" class="flex-1 text-center text-sm">Mal</label>
                        </div>
                    </div>

                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm">
                        <p class="text-sm font-medium text-slate-700 mb-3">Est√°n fijadas correctamente:</p>
                        <div class="flex radio-group">
                            <input type="radio" id="fijadas-si" name="fijadas" checked>
                            <label for="fijadas-si" class="flex-1 text-center text-sm">S√≠</label>
                            <input type="radio" id="fijadas-no" name="fijadas">
                            <label for="fijadas-no" class="flex-1 text-center text-sm">No</label>
                        </div>
                    </div>
                </div>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Evidencia Fotogr√°fica</h3>
                <button class="w-full bg-slate-100 hover:bg-slate-200 border-2 border-dashed border-slate-300 hover:border-slate-400 rounded-xl p-4 text-slate-400 hover:text-slate-600 font-bold text-sm flex items-center justify-center gap-2 transition group mb-8">
                    <i class="fas fa-camera text-lg group-hover:scale-110 transition"></i>
                    <span>Agregar Foto</span>
                    <span class="text-xs font-normal opacity-60">(m√°x. 5)</span>
                </button>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Notas del T√©cnico</h3>
                <textarea class="w-full bg-white border border-slate-200 rounded-xl p-4 text-sm text-slate-700 h-24 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 resize-none shadow-sm" placeholder="Observaciones sobre este paso..."></textarea>
            </div>

            <div class="absolute bottom-0 w-full bg-white p-4 border-t border-slate-100 flex gap-3 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-10">
                <button onclick="goTo('step4')" class="py-3.5 px-4 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition flex items-center justify-center" aria-label="Volver al paso anterior">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="flex-1 py-3.5 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition">Guardar</button>
                <button onclick="goTo('step6')" class="flex-[2] btn-primary py-3.5 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99] flex items-center justify-center gap-2">
                    Siguiente Paso <i class="fas fa-chevron-right text-xs"></i>
                </button>
            </div>
        </div>

        <!-- PASO 6: COMPONENTES ADICIONALES -->
        <div id="step6" class="screen bg-slate-50">
            <div class="bg-white pt-12 pb-4 px-6 shadow-sm border-b border-slate-100 z-10">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-bold text-orange-600 uppercase tracking-wider bg-orange-50 px-2 py-1 rounded">Paso 6 de 7</span>
                    <span class="text-xs font-bold text-slate-400">86% completado</span>
                </div>
                <h2 class="text-xl font-bold text-slate-800 mt-3">Componentes Adicionales</h2>
                <div class="w-full h-2 bg-slate-100 rounded-full mt-4 overflow-hidden">
                    <div class="h-full bg-orange-500 w-[86%] rounded-full relative"></div>
                </div>
            </div>

            <div class="p-6 overflow-y-auto flex-1 no-scrollbar pb-24">
                <!-- CARBONATADOR CON "APLICA" -->
                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Carbonatador</h3>
                <div class="bg-orange-50 border-2 border-orange-200 rounded-xl p-4 mb-4">
                    <label class="flex items-start gap-3 cursor-pointer mb-4">
                        <input type="checkbox" id="carbonatador-no-aplica" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-orange-300 focus:ring-orange-500 cursor-pointer" onchange="document.getElementById('carbonatador-content').style.opacity = this.checked ? '0.4' : '1'; document.getElementById('carbonatador-content').style.pointerEvents = this.checked ? 'none' : 'auto';">
                        <div>
                            <span class="text-sm font-bold text-orange-800 block">No Aplica</span>
                            <span class="text-xs text-orange-600">Marcar si el equipo no cuenta con carbonatador</span>
                        </div>
                    </label>
                    
                    <div id="carbonatador-content" class="space-y-3 transition-opacity duration-300">
                        <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm">
                            <p class="text-sm font-medium text-slate-700 mb-3">Fugas detectadas:</p>
                            <div class="flex radio-group">
                                <input type="radio" id="fugas-si" name="fugas">
                                <label for="fugas-si" class="flex-1 text-center text-sm">S√≠</label>
                                <input type="radio" id="fugas-no" name="fugas" checked>
                                <label for="fugas-no" class="flex-1 text-center text-sm">No</label>
                            </div>
                        </div>
                        <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm">
                            <p class="text-sm font-medium text-slate-700 mb-3">Funcionamiento:</p>
                            <div class="flex radio-group">
                                <input type="radio" id="func-bien" name="funcionamiento" checked>
                                <label for="func-bien" class="flex-1 text-center text-sm">Bien</label>
                                <input type="radio" id="func-mal" name="funcionamiento">
                                <label for="func-mal" class="flex-1 text-center text-sm">Mal</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- MAN√ìMETRO (SIN CAMBIOS) -->
                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Man√≥metro</h3>
                <div class="space-y-3 mb-6">
                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm">
                        <p class="text-sm font-medium text-slate-700 mb-3">Relojes funcionan:</p>
                        <div class="flex radio-group">
                            <input type="radio" id="relojes-bien" name="relojes" checked>
                            <label for="relojes-bien" class="flex-1 text-center text-sm">Bien</label>
                            <input type="radio" id="relojes-mal" name="relojes">
                            <label for="relojes-mal" class="flex-1 text-center text-sm">Mal</label>
                        </div>
                    </div>
                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm">
                        <p class="text-sm font-medium text-slate-700 mb-3">Tiene llave para tanques:</p>
                        <div class="flex radio-group">
                            <input type="radio" id="llave-si" name="llave" checked>
                            <label for="llave-si" class="flex-1 text-center text-sm">S√≠</label>
                            <input type="radio" id="llave-no" name="llave">
                            <label for="llave-no" class="flex-1 text-center text-sm">No</label>
                        </div>
                    </div>
                </div>

                <!-- BOMBA DE AGUA CON "APLICA" -->
                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Bomba de Agua</h3>
                <div class="bg-orange-50 border-2 border-orange-200 rounded-xl p-4 mb-6">
                    <label class="flex items-start gap-3 cursor-pointer mb-4">
                        <input type="checkbox" id="bomba-agua-no-aplica" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-orange-300 focus:ring-orange-500 cursor-pointer" onchange="document.getElementById('bomba-agua-content').style.opacity = this.checked ? '0.4' : '1'; document.getElementById('bomba-agua-content').style.pointerEvents = this.checked ? 'none' : 'auto';">
                        <div>
                            <span class="text-sm font-bold text-orange-800 block">No Aplica</span>
                            <span class="text-xs text-orange-600">Marcar si el equipo no cuenta con bomba de agua</span>
                        </div>
                    </label>
                    
                    <div id="bomba-agua-content" class="space-y-3 transition-opacity duration-300">
                        <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm">
                            <p class="text-sm font-medium text-slate-700 mb-3">Funciona:</p>
                            <div class="flex radio-group">
                                <input type="radio" id="bomba-bien" name="bomba-agua" checked>
                                <label for="bomba-bien" class="flex-1 text-center text-sm">Bien</label>
                                <input type="radio" id="bomba-mal" name="bomba-agua">
                                <label for="bomba-mal" class="flex-1 text-center text-sm">Mal</label>
                            </div>
                        </div>
                        <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm">
                            <label class="block text-sm font-medium text-slate-700 mb-2">Revisi√≥n de agua y adecuado</label>
                            <input type="text" class="w-full border border-slate-300 rounded-lg px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500" placeholder="Descripci√≥n">
                        </div>
                    </div>
                </div>

                <!-- COMPRESOR DE AIRE CON "APLICA" (NUEVO) -->
                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Compresor de Aire</h3>
                <div class="bg-orange-50 border-2 border-orange-200 rounded-xl p-4 mb-6">
                    <label class="flex items-start gap-3 cursor-pointer mb-4">
                        <input type="checkbox" id="compresor-aire-no-aplica" class="mt-0.5 w-5 h-5 text-orange-500 rounded border-orange-300 focus:ring-orange-500 cursor-pointer" onchange="document.getElementById('compresor-aire-content').style.opacity = this.checked ? '0.4' : '1'; document.getElementById('compresor-aire-content').style.pointerEvents = this.checked ? 'none' : 'auto';">
                        <div>
                            <span class="text-sm font-bold text-orange-800 block">No Aplica</span>
                            <span class="text-xs text-orange-600">Marcar si el equipo no cuenta con compresor de aire</span>
                        </div>
                    </label>
                    
                    <div id="compresor-aire-content" class="transition-opacity duration-300">
                        <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-sm">
                            <p class="text-sm font-medium text-slate-700 mb-3">Estado del compresor:</p>
                            <div class="flex radio-group">
                                <input type="radio" id="compresor-bien" name="compresor-aire" checked>
                                <label for="compresor-bien" class="flex-1 text-center text-sm">Bien</label>
                                <input type="radio" id="compresor-mal" name="compresor-aire">
                                <label for="compresor-mal" class="flex-1 text-center text-sm">Mal</label>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Evidencia Fotogr√°fica</h3>
                <button class="w-full bg-slate-100 hover:bg-slate-200 border-2 border-dashed border-slate-300 hover:border-slate-400 rounded-xl p-4 text-slate-400 hover:text-slate-600 font-bold text-sm flex items-center justify-center gap-2 transition group mb-8">
                    <i class="fas fa-camera text-lg group-hover:scale-110 transition"></i>
                    <span>Agregar Foto</span>
                    <span class="text-xs font-normal opacity-60">(m√°x. 5)</span>
                </button>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Notas del T√©cnico</h3>
                <textarea class="w-full bg-white border border-slate-200 rounded-xl p-4 text-sm text-slate-700 h-24 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 resize-none shadow-sm" placeholder="Observaciones sobre este paso..."></textarea>
            </div>

            <div class="absolute bottom-0 w-full bg-white p-4 border-t border-slate-100 flex gap-3 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-10">
                <button onclick="goTo('step5')" class="py-3.5 px-4 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition flex items-center justify-center" aria-label="Volver al paso anterior">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="flex-1 py-3.5 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition">Guardar</button>
                <button onclick="goTo('step7')" class="flex-[2] btn-primary py-3.5 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99] flex items-center justify-center gap-2">
                    Siguiente Paso <i class="fas fa-chevron-right text-xs"></i>
                </button>
            </div>
        </div>

        <!-- PASO 7: CALIBRACI√ìN DE V√ÅLVULAS (TABLA) -->
        <div id="step7" class="screen bg-slate-50">
            <div class="bg-white pt-12 pb-4 px-6 shadow-sm border-b border-slate-100 z-10">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-bold text-orange-600 uppercase tracking-wider bg-orange-50 px-2 py-1 rounded">Paso 7 de 7</span>
                    <span class="text-xs font-bold text-slate-400">100% completado</span>
                </div>
                <h2 class="text-xl font-bold text-slate-800 mt-3">Calibraci√≥n de V√°lvulas</h2>
                <div class="w-full h-2 bg-slate-100 rounded-full mt-4 overflow-hidden">
                    <div class="h-full bg-orange-500 w-[100%] rounded-full relative"></div>
                </div>
            </div>

            <div class="p-6 overflow-y-auto flex-1 no-scrollbar pb-24">
                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Registro de V√°lvulas (12 v√°lvulas)</h3>
                
                <!-- TABLA DE V√ÅLVULAS -->
                <div class="bg-white border border-slate-200 rounded-xl shadow-sm overflow-hidden mb-8">
                    <table class="w-full text-sm">
                        <thead class="bg-orange-50 border-b border-slate-200">
                            <tr>
                                <th class="py-2 px-1 text-left font-bold text-slate-700 text-xs">V</th>
                                <th class="py-2 px-1 text-left font-bold text-slate-700 text-xs">Producto</th>
                                <th class="py-2 px-1 text-center font-bold text-slate-700 text-xs">Caducidad</th>
                                <th class="py-2 px-1 text-center font-bold text-slate-700 text-xs">A-J</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            <tr class="hover:bg-slate-50 transition">
                                <td class="py-2 px-1 font-bold text-slate-700 text-sm">1</td>
                                <td class="py-1.5 px-1">
                                    <input type="text" class="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50" placeholder="Lim√≥n" style="max-width: 110px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <input type="date" class="w-full border border-slate-300 rounded px-1 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-orange-500/50" style="max-width: 95px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <select class="w-full border border-slate-300 rounded px-1 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50 bg-white" style="max-width: 60px;">
                                        <option value="">--</option>
                                        <option value="ok">OK</option>
                                        <option value="mal">MAL</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition">
                                <td class="py-2 px-1 font-bold text-slate-700 text-sm">2</td>
                                <td class="py-1.5 px-1">
                                    <input type="text" class="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50" placeholder="Lim√≥n" style="max-width: 110px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <input type="date" class="w-full border border-slate-300 rounded px-1 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-orange-500/50" style="max-width: 95px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <select class="w-full border border-slate-300 rounded px-1 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50 bg-white" style="max-width: 60px;">
                                        <option value="">--</option>
                                        <option value="ok">OK</option>
                                        <option value="mal">MAL</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition">
                                <td class="py-2 px-1 font-bold text-slate-700 text-sm">3</td>
                                <td class="py-1.5 px-1">
                                    <input type="text" class="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50" placeholder="Lim√≥n" style="max-width: 110px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <input type="date" class="w-full border border-slate-300 rounded px-1 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-orange-500/50" style="max-width: 95px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <select class="w-full border border-slate-300 rounded px-1 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50 bg-white" style="max-width: 60px;">
                                        <option value="">--</option>
                                        <option value="ok">OK</option>
                                        <option value="mal">MAL</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition">
                                <td class="py-2 px-1 font-bold text-slate-700 text-sm">4</td>
                                <td class="py-1.5 px-1">
                                    <input type="text" class="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50" placeholder="Lim√≥n" style="max-width: 110px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <input type="date" class="w-full border border-slate-300 rounded px-1 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-orange-500/50" style="max-width: 95px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <select class="w-full border border-slate-300 rounded px-1 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50 bg-white" style="max-width: 60px;">
                                        <option value="">--</option>
                                        <option value="ok">OK</option>
                                        <option value="mal">MAL</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition">
                                <td class="py-2 px-1 font-bold text-slate-700 text-sm">5</td>
                                <td class="py-1.5 px-1">
                                    <input type="text" class="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50" placeholder="Lim√≥n" style="max-width: 110px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <input type="date" class="w-full border border-slate-300 rounded px-1 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-orange-500/50" style="max-width: 95px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <select class="w-full border border-slate-300 rounded px-1 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50 bg-white" style="max-width: 60px;">
                                        <option value="">--</option>
                                        <option value="ok">OK</option>
                                        <option value="mal">MAL</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition">
                                <td class="py-2 px-1 font-bold text-slate-700 text-sm">6</td>
                                <td class="py-1.5 px-1">
                                    <input type="text" class="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50" placeholder="Lim√≥n" style="max-width: 110px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <input type="date" class="w-full border border-slate-300 rounded px-1 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-orange-500/50" style="max-width: 95px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <select class="w-full border border-slate-300 rounded px-1 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50 bg-white" style="max-width: 60px;">
                                        <option value="">--</option>
                                        <option value="ok">OK</option>
                                        <option value="mal">MAL</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition">
                                <td class="py-2 px-1 font-bold text-slate-700 text-sm">7</td>
                                <td class="py-1.5 px-1">
                                    <input type="text" class="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50" placeholder="Lim√≥n" style="max-width: 110px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <input type="date" class="w-full border border-slate-300 rounded px-1 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-orange-500/50" style="max-width: 95px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <select class="w-full border border-slate-300 rounded px-1 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50 bg-white" style="max-width: 60px;">
                                        <option value="">--</option>
                                        <option value="ok">OK</option>
                                        <option value="mal">MAL</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition">
                                <td class="py-2 px-1 font-bold text-slate-700 text-sm">8</td>
                                <td class="py-1.5 px-1">
                                    <input type="text" class="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50" placeholder="Lim√≥n" style="max-width: 110px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <input type="date" class="w-full border border-slate-300 rounded px-1 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-orange-500/50" style="max-width: 95px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <select class="w-full border border-slate-300 rounded px-1 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50 bg-white" style="max-width: 60px;">
                                        <option value="">--</option>
                                        <option value="ok">OK</option>
                                        <option value="mal">MAL</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition">
                                <td class="py-2 px-1 font-bold text-slate-700 text-sm">9</td>
                                <td class="py-1.5 px-1">
                                    <input type="text" class="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50" placeholder="Lim√≥n" style="max-width: 110px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <input type="date" class="w-full border border-slate-300 rounded px-1 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-orange-500/50" style="max-width: 95px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <select class="w-full border border-slate-300 rounded px-1 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50 bg-white" style="max-width: 60px;">
                                        <option value="">--</option>
                                        <option value="ok">OK</option>
                                        <option value="mal">MAL</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition">
                                <td class="py-2 px-1 font-bold text-slate-700 text-sm">10</td>
                                <td class="py-1.5 px-1">
                                    <input type="text" class="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50" placeholder="Lim√≥n" style="max-width: 110px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <input type="date" class="w-full border border-slate-300 rounded px-1 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-orange-500/50" style="max-width: 95px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <select class="w-full border border-slate-300 rounded px-1 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50 bg-white" style="max-width: 60px;">
                                        <option value="">--</option>
                                        <option value="ok">OK</option>
                                        <option value="mal">MAL</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition">
                                <td class="py-2 px-1 font-bold text-slate-700 text-sm">11</td>
                                <td class="py-1.5 px-1">
                                    <input type="text" class="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50" placeholder="Lim√≥n" style="max-width: 110px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <input type="date" class="w-full border border-slate-300 rounded px-1 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-orange-500/50" style="max-width: 95px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <select class="w-full border border-slate-300 rounded px-1 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50 bg-white" style="max-width: 60px;">
                                        <option value="">--</option>
                                        <option value="ok">OK</option>
                                        <option value="mal">MAL</option>
                                    </select>
                                </td>
                            </tr>
                            <tr class="hover:bg-slate-50 transition">
                                <td class="py-2 px-1 font-bold text-slate-700 text-sm">12</td>
                                <td class="py-1.5 px-1">
                                    <input type="text" class="w-full border border-slate-300 rounded px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50" placeholder="Lim√≥n" style="max-width: 110px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <input type="date" class="w-full border border-slate-300 rounded px-1 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-orange-500/50" style="max-width: 95px;">
                                </td>
                                <td class="py-1.5 px-1">
                                    <select class="w-full border border-slate-300 rounded px-1 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500/50 bg-white" style="max-width: 60px;">
                                        <option value="">--</option>
                                        <option value="ok">OK</option>
                                        <option value="mal">MAL</option>
                                    </select>
                                </td>
                            </tr>
                            </tbody>
                    </table>
                </div>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Evidencia Fotogr√°fica</h3>
                <button class="w-full bg-slate-100 hover:bg-slate-200 border-2 border-dashed border-slate-300 hover:border-slate-400 rounded-xl p-4 text-slate-400 hover:text-slate-600 font-bold text-sm flex items-center justify-center gap-2 transition group mb-8">
                    <i class="fas fa-camera text-lg group-hover:scale-110 transition"></i>
                    <span>Agregar Foto</span>
                    <span class="text-xs font-normal opacity-60">(m√°x. 5)</span>
                </button>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Notas del T√©cnico</h3>
                <textarea class="w-full bg-white border border-slate-200 rounded-xl p-4 text-sm text-slate-700 h-24 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 resize-none shadow-sm" placeholder="Observaciones finales sobre la calibraci√≥n..."></textarea>
            </div>

            <div class="absolute bottom-0 w-full bg-white p-4 border-t border-slate-100 flex gap-3 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-10">
                <button onclick="goTo('step6')" class="py-3.5 px-4 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition flex items-center justify-center" aria-label="Volver al paso anterior">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="flex-1 py-3.5 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition">Guardar</button>
                <button onclick="goTo('signature')" class="flex-[2] btn-primary py-3.5 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99] flex items-center justify-center gap-2">
                    Finalizar y Firmar <i class="fas fa-chevron-right text-xs"></i>
                </button>
            </div>
        </div>

        <div id="corrective" class="screen bg-slate-50">
            <div class="bg-white pt-12 pb-4 px-4 shadow-sm flex items-center gap-4 z-10 border-b border-slate-100 bg-red-50">
                <button onclick="goTo('dashboard')" class="h-8 w-8 rounded-full bg-white/80 flex items-center justify-center text-red-700 hover:bg-white transition">
                    <i class="fas fa-times"></i>
                </button>
                <h2 class="font-bold text-red-700 text-lg flex items-center gap-2"><i class="fas fa-wrench"></i> Nuevo Correctivo</h2>
            </div>

            <div class="p-6 overflow-y-auto flex-1 no-scrollbar pb-24">
                
                <div class="mb-6 bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Cliente y Equipo</h3>
                    <select class="calibeb-select bg-slate-50 text-slate-800 text-sm rounded-xl block w-full p-3 border border-slate-200 focus:ring-2 focus:ring-red-500 focus:border-red-500 font-medium transition-all mb-3 bg-[url('data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 20 20\'%3e%3cpath stroke=\'%2364748b\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\' d=\'M6 8l4 4 4-4\'/%3e%3c/svg\'>')]">
                        <option selected>Seleccionar Cliente...</option>
                        <option>Aptiv Planta 5</option>
                        <option>Comedor Industrial Baj√≠o</option>
                    </select>
                    <select class="calibeb-select bg-slate-50 text-slate-800 text-sm rounded-xl block w-full p-3 border border-slate-200 focus:ring-2 focus:ring-red-500 focus:border-red-500 font-medium transition-all bg-[url('data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 20 20\'%3e%3cpath stroke=\'%2364748b\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\' d=\'M6 8l4 4 4-4\'/%3e%3c/svg\'>')]">
                        <option selected>Seleccionar Equipo...</option>
                    </select>
                     <p class="text-xs text-slate-400 mt-2 flex items-center"><i class="fas fa-info-circle mr-1"></i> Escanea el QR del equipo para autocompletar.</p>
                </div>

                <div class="mb-6">
                     <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider flex items-center justify-between">
                        Descripci√≥n de la Falla <span class="text-red-500">*</span>
                    </h3>
                    <textarea required data-min-length="20" class="w-full bg-white border border-slate-200 rounded-xl p-4 text-sm text-slate-700 h-32 focus:outline-none focus:ring-2 focus:ring-red-500/50 focus:border-red-500 resize-none shadow-sm" placeholder="Describa el problema encontrado y la soluci√≥n aplicada... (m√≠nimo 20 caracteres)"></textarea>
                </div>

                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Evidencia del Trabajo (Req.)</h3>
                <div class="grid grid-cols-3 gap-3 mb-8">
                    <div class="aspect-square bg-slate-100 rounded-xl border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-slate-400 cursor-pointer hover:bg-slate-200 hover:border-slate-400 transition group">
                        <i class="fas fa-camera text-xl mb-1 group-hover:scale-110 transition"></i>
                        <span class="text-[8px] font-bold">FOTO ANTES</span>
                    </div>
                    <div class="aspect-square bg-slate-100 rounded-xl border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-slate-400 cursor-pointer hover:bg-slate-200 hover:border-slate-400 transition group">
                        <i class="fas fa-camera text-xl mb-1 group-hover:scale-110 transition"></i>
                        <span class="text-[8px] font-bold">FOTO DESPU√âS</span>
                    </div>
                     <div class="aspect-square bg-slate-100 rounded-xl border-2 border-dashed border-slate-300 flex flex-col items-center justify-center text-slate-400 cursor-pointer hover:bg-slate-200 hover:border-slate-400 transition group">
                        <i class="fas fa-plus text-xl mb-1 group-hover:scale-110 transition"></i>
                    </div>
                </div>
            </div>

            <div class="absolute bottom-0 w-full bg-white p-4 border-t border-slate-100 flex gap-4 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-10">
                <button onclick="goTo('signature')" class="w-full bg-red-600 hover:bg-red-700 text-white py-3.5 rounded-xl font-bold shadow-lg transition transform active:scale-[0.99] flex items-center justify-center gap-2">
                    Continuar a Firma <i class="fas fa-chevron-right text-xs"></i>
                </button>
            </div>
        </div>

        <div id="signature" class="screen bg-white flex flex-col">
            <div class="pt-12 px-6 pb-6 relative">
                <button onclick="goTo('step7')" class="absolute top-4 left-4 h-10 w-10 rounded-full bg-slate-100 hover:bg-slate-200 transition flex items-center justify-center text-slate-600 shadow-sm" aria-label="Volver al paso anterior">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2 class="text-2xl font-bold text-slate-800 mb-1">Finalizar Servicio</h2>
                <p class="text-sm text-slate-500">Solicita la firma del responsable.</p>
            </div>

            <div class="flex-1 px-6 bg-slate-50 rounded-t-[40px] pt-8 shadow-[inset_0_4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-slate-100">
                <div class="mb-5">
                    <label class="text-xs font-bold text-slate-500 uppercase mb-2 block tracking-wider">Nombre del Cliente</label>
                    <div class="flex items-center bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm focus-within:ring-2 focus-within:ring-orange-500/50 focus-within:border-orange-500 transition">
                         <span class="pl-4 text-slate-400"><i class="far fa-user"></i></span>
                        <input type="text" value="Ing. Roberto Mendoza" class="w-full bg-transparent p-3 text-sm text-slate-800 font-medium focus:outline-none">
                    </div>
                </div>

                <div class="mb-6">
                     <div class="flex justify-between items-center mb-2">
                        <label class="text-xs font-bold text-slate-500 uppercase tracking-wider">Firma Digital</label>
                        <button id="clear-signature-btn" type="button" class="text-xs text-red-500 font-bold hover:text-red-600 transition flex items-center gap-1" aria-label="Borrar firma"><i class="fas fa-eraser" aria-hidden="true"></i> Borrar</button>
                     </div>
                    <div class="h-44 bg-white border-2 border-dashed border-slate-300 rounded-2xl relative overflow-hidden bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px]">
                        <canvas id="signature-canvas" class="absolute inset-0 h-full w-full cursor-crosshair touch-none" width="600" height="300" aria-label="Canvas de firma digital"></canvas>
                        <p class="absolute bottom-3 left-0 right-0 text-center text-[10px] text-slate-400 font-medium uppercase tracking-widest pointer-events-none" aria-hidden="true">Firmar en el recuadro</p>
                    </div>
                </div>

                <div class="flex gap-3 mb-8 p-4 bg-blue-50/50 rounded-xl border border-blue-100 items-start">
                    <input type="checkbox" checked class="mt-0.5 h-5 w-5 text-blue-600 rounded border-blue-300 focus:ring-blue-500">
                    <p class="text-xs text-blue-800 leading-relaxed font-medium">
                        Certifico que el servicio se ha completado satisfactoriamente. Se enviar√° el reporte PDF a <strong>roberto@aptiv.com</strong>.
                    </p>
                </div>

                <button onclick="window.location.href='success.html'" class="w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-xl font-bold shadow-lg flex items-center justify-center gap-2 transition transform active:scale-[0.99] text-lg">
                    <i class="fas fa-check-circle"></i> Finalizar y Enviar
                </button>
                
                <button onclick="goTo('step7')" class="w-full py-4 text-slate-400 text-sm font-medium hover:text-slate-600 transition mt-2">Cancelar y volver</button>
            </div>
        </div>

    </div>

    <!-- Scripts Externos -->
    <script src="mock-data.js"></script>
    <script src="components.js"></script>
    <script src="app.js"></script>
</body>
</html>